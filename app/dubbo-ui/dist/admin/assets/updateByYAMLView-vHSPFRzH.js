import{_ as N}from"./MonacoEditor.vue_vue_type_script_setup_true_lang-4RKREvfq.js";import{g as A,u as L}from"./traffic-8AWvGuIw.js";import{d as M,u as S,n as m,Q as O,v,t as e,e as u,o as y,c as a,z as t,h as w,a9 as P,aa as Y,J as n,K as z,G as $,H as G,_ as H}from"./index-uR6obgcO.js";import{y as C}from"./js-yaml-lTHa-xT-.js";import"./request-QeNrWFvM.js";const i=_=>($("data-v-5caf731a"),_=_(),G(),_),J={class:"editorBox"},K={class:"bottom-action-footer"},Q=i(()=>n("br",null,null,-1)),T=i(()=>n("br",null,null,-1)),U=i(()=>n("br",null,null,-1)),j=i(()=>n("br",null,null,-1)),q=i(()=>n("br",null,null,-1)),E=i(()=>n("br",null,null,-1)),F=M({__name:"updateByYAMLView",setup(_){const b=S(),B=m(!1),c=m(!1),h=m(8),p=m(`configVersion: v3.0
force: false
enabled: true
runtime: false
key: shop-detail
tags:
  - name: gray
    match:
      - key: env
        value:
          exact: gray`);async function x(){var s,o,r;let l=await A((s=b.params)==null?void 0:s.ruleName);if((l==null?void 0:l.code)===200){const d=(o=b.params)==null?void 0:o.ruleName;if(d&&l.data.scope==="service"){const g=d==null?void 0:d.split(":");l.data.group=(r=g[2])==null?void 0:r.split(".")[0]}p.value=C.dump(l==null?void 0:l.data)}}const D=async()=>{var o;const l=C.load(p.value);(await L((o=b.params)==null?void 0:o.ruleName,l)).code===200&&await x()};return O(()=>{x()}),(l,s)=>{const o=u("a-button"),r=u("a-flex"),d=u("a-space"),g=u("a-affix"),k=u("a-col"),f=u("a-descriptions-item"),I=u("a-descriptions"),V=u("a-card");return y(),v(V,null,{default:e(()=>[a(r,{style:{width:"100%"}},{default:e(()=>[a(k,{span:c.value?24-h.value:24,class:"left"},{default:e(()=>[a(r,{vertical:"",align:"end"},{default:e(()=>[a(o,{type:"text",style:{color:"#0a90d5"},onClick:s[0]||(s[0]=R=>c.value=!c.value)},{default:e(()=>[t(" 字段说明 "),c.value?(y(),v(w(Y),{key:1})):(y(),v(w(P),{key:0}))]),_:1}),n("div",J,[a(N,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=R=>p.value=R),theme:"vs-dark",height:500,language:"yaml",readonly:B.value},null,8,["modelValue","readonly"])])]),_:1}),a(g,{"offset-bottom":10},{default:e(()=>[n("div",K,[a(d,{align:"center",size:"large"},{default:e(()=>[a(o,{type:"primary",onClick:D},{default:e(()=>[t(" 确认")]),_:1}),a(o,null,{default:e(()=>[t(" 取消")]),_:1})]),_:1})])]),_:1})]),_:1},8,["span"]),a(k,{span:c.value?h.value:0,class:"right"},{default:e(()=>[c.value?(y(),v(V,{key:0,class:"sliderBox"},{default:e(()=>[n("div",null,[a(I,{title:"字段说明",column:1},{default:e(()=>[a(f,{label:"key"},{default:e(()=>[t(" 作用对象"),Q,t(" 可能的值：Dubbo应用名或者服务名 ")]),_:1}),a(f,{label:"scope"},{default:e(()=>[t(" 规则粒度"),T,t(" 可能的值：application, service ")]),_:1}),a(f,{label:"force"},{default:e(()=>[t(" 容错保护"),U,t(" 可能的值：true, false"),j,t(" 描述：如果为true，则路由筛选后若没有可用的地址则会直接报异常；如果为false，则会从可用地址中选择完成RPC调用 ")]),_:1}),a(f,{label:"runtime"},{default:e(()=>[t(" 运行时生效"),q,t(" 可能的值：true, false"),E,t(" 描述：如果为true，则该rule下的所有路由将会实时生效；若为false，则只有在启动时才会生效 ")]),_:1})]),_:1})])]),_:1})):z("",!0)]),_:1},8,["span"])]),_:1})]),_:1})}}}),te=H(F,[["__scopeId","data-v-5caf731a"]]);export{te as default};
