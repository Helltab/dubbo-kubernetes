import{d as b,k as T,l as S,m as N,r as E,Q as V,f as l,c as n,t as o,h as r,P as g,M as $,e as C,o as d,R as p,z as a,J as B,I as D,B as _,K as c,F as f,_ as A}from"./index-xTAF8xFn.js";import{s as G,d as O}from"./traffic-iplmPIBf.js";import{S as P,a as F,s as y}from"./SearchUtil-6RuvjhOJ.js";import{f as M}from"./DateUtil-NptI2C_p.js";import"./request-2XjeWQGZ.js";const Y={class:"__container_resources_application_index"},J=["onClick"],K=b({__name:"index",setup(j){T(e=>({"1530f64f":r(g)}));const x=S(N.PROVIDE_INJECT_KEY);let I=[{title:"ruleName",key:"ruleName",dataIndex:"ruleName",sorter:(e,t)=>y(e.appName,t.appName),width:140},{title:"ruleGranularity",key:"ruleGranularity",dataIndex:"ruleGranularity",render:(e,t)=>t.isService?"服务":"应用",width:100,sorter:(e,t)=>y(e.instanceNum,t.instanceNum)},{title:"createTime",key:"createTime",dataIndex:"createTime",width:120,sorter:(e,t)=>y(e.instanceNum,t.instanceNum)},{title:"enabled",key:"enabled",dataIndex:"enabled",width:120,sorter:(e,t)=>y(e.instanceNum,t.instanceNum)},{title:"operation",key:"operation",dataIndex:"operation",width:200}];const u=E(new P([{label:"serviceGovernance",param:"serviceGovernance",placeholder:"typeRoutingRules",style:{width:"200px"}}],G,I)),R=async e=>{(await O(e)).code===200&&await u.onSearch()};V(()=>{x.conditionRule=null,x.addConditionRuleSate=null,u.onSearch()});const v=e=>{R(e)};return $(N.SEARCH_DOMAIN,u),(e,t)=>{const m=C("a-button"),w=C("a-popconfirm");return d(),l("div",Y,[n(F,{"search-domain":u},{customOperation:o(()=>[n(m,{type:"primary",onClick:t[0]||(t[0]=k=>r(p).push("/traffic/addRoutingRule/addByFormView"))},{default:o(()=>[a("新增条件路由规则 ")]),_:1})]),bodyCell:o(({text:k,column:i,record:s})=>[i.dataIndex==="ruleName"?(d(),l("span",{key:0,class:"rule-link",onClick:h=>r(p).push(`formview/${s[i.key]}`)},[B("b",null,[n(r(D),{style:{"margin-bottom":"-2px"},icon:"material-symbols:attach-file-rounded"}),a(" "+_(k),1)])],8,J)):c("",!0),i.dataIndex==="ruleGranularity"?(d(),l(f,{key:1},[a(_(s.scope==="service"?"服务":"应用"),1)],64)):c("",!0),i.dataIndex==="enabled"?(d(),l(f,{key:2},[a(_(k?"启用":"禁用"),1)],64)):c("",!0),i.dataIndex==="createTime"?(d(),l(f,{key:3},[a(_(r(M)(s.createTime)),1)],64)):c("",!0),i.dataIndex==="operation"?(d(),l(f,{key:4},[n(m,{type:"link",onClick:h=>r(p).push(`formview/${s.ruleName}`)},{default:o(()=>[a(" 查看 ")]),_:2},1032,["onClick"]),n(m,{type:"link",onClick:h=>r(p).push(`/traffic/updateRoutingRule/updateByFormView/${s.ruleName}`)},{default:o(()=>[a(" 修改 ")]),_:2},1032,["onClick"]),n(w,{title:"确认删除该条件路由规则？","ok-text":"Yes","cancel-text":"No",onConfirm:h=>v(s.ruleName)},{default:o(()=>[n(m,{type:"link"},{default:o(()=>[a(" 删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):c("",!0)]),_:1},8,["search-domain"])])}}}),U=A(K,[["__scopeId","data-v-67d0aed4"]]);export{U as default};
