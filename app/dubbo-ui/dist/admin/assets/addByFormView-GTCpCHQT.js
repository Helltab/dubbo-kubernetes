import{u as be}from"./index-fgUiU05I.js";import{d as ge,g as Ce,b as $e,n as G,r as Me,f as F,c as e,t as a,e as D,o as c,z as _,v,h as K,a9 as Ue,aa as we,K as R,F as H,y as W,J as E,B as O,I as S,G as Te,H as De,_ as qe}from"./index-DjBintlM.js";import{a as Re}from"./traffic-jO2-nS2i.js";import"./request-Q-EYbbyM.js";const L=J=>(Te("data-v-1dcf22b2"),J=J(),De(),J),Ke={class:"__container_routingRule_detail"},Se={style:{"max-width":"400px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},xe=L(()=>E("br",null,null,-1)),ze=L(()=>E("br",null,null,-1)),Oe=L(()=>E("br",null,null,-1)),je=L(()=>E("br",null,null,-1)),Be=L(()=>E("br",null,null,-1)),Ee=L(()=>E("br",null,null,-1)),Ve=ge({__name:"addByFormView",setup(J){Ce();const Z=$e(),P=G(!1),X=G(8);be().toClipboard;const M=Me({version:"",ruleGranularity:"",objectOfAction:"",enable:!0,faultTolerantProtection:!1,runtime:!0,priority:null,group:""}),m=G([{label:"host",value:"host"},{label:"application",value:"application"},{label:"method",value:"method"},{label:"arguments",value:"arguments"},{label:"attachments",value:"attachments"},{label:"其他",value:"other"}]),I=G([{label:"host",value:"host"},{label:"其他",value:"other"}]),V=G([{label:"=",value:"="},{label:"!=",value:"!="}]),ee=G([{label:"应用",value:"application"},{label:"服务",value:"service"}]),r=G([{selectedMatchConditionTypes:[],requestMatch:[],selectedRouteDistributeMatchTypes:[],routeDistribute:[{type:"host",condition:"",value:""},{type:"other",list:[{myKey:"",condition:"",value:""}]}]}]),le=()=>{r.value.push({selectedMatchConditionTypes:[],requestMatch:[],selectedRouteDistributeMatchTypes:[],routeDistribute:[{type:"host",condition:"=",value:"127.0.0.1"},{type:"other",list:[{myKey:"key",condition:"=",value:"value"}]}]})},ae=s=>{r.value.splice(s,1)},te=s=>{r.value[s].requestMatch=[],r.value[s].selectedMatchConditionTypes=[]},ne=s=>{r.value[s].requestMatch=[{type:"host",condition:"",value:""},{type:"application",condition:"",value:""},{type:"method",condition:"",value:""},{type:"arguments",list:[{index:0,condition:"",value:""}]},{type:"attachments",list:[{myKey:"key",condition:"",value:""}]},{type:"other",list:[{myKey:"key",condition:"",value:""}]}]},Q=(s,t)=>{r.value[t].selectedMatchConditionTypes=r.value[t].selectedMatchConditionTypes.filter(d=>d!==s)},se=(s,t)=>{r.value[t].selectedRouteDistributeMatchTypes=r.value[t].selectedRouteDistributeMatchTypes.filter(d=>d!==s)},ue=[{dataIndex:"index",key:"index",title:"参数索引"},{dataIndex:"condition",key:"condition",title:"关系"},{dataIndex:"value",key:"value",title:"值"},{dataIndex:"operation",key:"operation",title:"操作"}],oe=(s,t)=>{r.value[s].requestMatch[t].list.push({index:0,condition:"=",value:""})},ie=(s,t,d)=>{r.value[s].requestMatch[t].list.length===1&&(r.value[s].selectedMatchConditionTypes=r.value[s].selectedMatchConditionTypes.filter(b=>b!=="arguments")),r.value[s].requestMatch[t].list.splice(d,1)},ce=[{dataIndex:"myKey",key:"myKey",title:"键"},{dataIndex:"condition",key:"condition",title:"关系"},{dataIndex:"value",key:"value",title:"值"},{dataIndex:"operation",key:"operation",title:"操作"}],de=(s,t)=>{r.value[s].requestMatch[t].list.push({key:"key",condition:"=",value:""})},re=(s,t,d)=>{r.value[s].requestMatch[t].list.length===1&&(r.value[s].selectedMatchConditionTypes=r.value[s].selectedMatchConditionTypes.filter(b=>b!=="attachments")),r.value[s].requestMatch[t].list.splice(d,1)},Y=[{dataIndex:"myKey",key:"myKey",title:"键"},{dataIndex:"condition",key:"condition",title:"关系"},{dataIndex:"value",key:"value",title:"值"},{dataIndex:"operation",key:"operation",title:"操作"}],pe=(s,t)=>{r.value[s].requestMatch[t].list.push({myKey:"",condition:"=",value:""})},ve=(s,t,d)=>{if(r.value[s].requestMatch[t].list.length===1){r.value[s].selectedMatchConditionTypes=r.value[s].selectedMatchConditionTypes.filter(b=>b!=="other");return}r.value[s].requestMatch[t].list.splice(d,1)},ye=(s,t)=>{r.value[s].routeDistribute[t].list.push({myKey:"",condition:"=",value:""})},he=(s,t,d)=>{if(r.value[s].routeDistribute[t].list.length===1){r.value[s].selectedRouteDistributeMatchTypes=r.value[s].selectedRouteDistributeMatchTypes.filter(b=>b!=="other");return}r.value[s].routeDistribute[t].list.splice(d,1)};function fe(s){var $,B;const t=r.value[s],{ruleGranularity:d,objectOfAction:b}=M;let U=`对于${d==="service"?"服务":"应用"}【${b||"未指定"}】`,y=[];($=t.selectedMatchConditionTypes)==null||$.forEach(w=>{var A,u,h,l;const i=(A=t.requestMatch)==null?void 0:A.find(g=>g.type===w);if(!i)return;let C="";const x=i.condition==="="?"等于":i.condition==="!="?"不等于":i.condition||"",z=i.value||"未指定";switch(w){case"host":C=`请求来源主机 ${x} ${z}`;break;case"application":C=`请求来源应用 ${x} ${z}`;break;case"method":C=`请求方法 ${x} ${z}`;break;case"arguments":const g=(u=i.list)==null?void 0:u.map(f=>{const T=f.condition==="="?"等于":f.condition==="!="?"不等于":f.condition||"",k=f.value!==void 0&&f.value!==""?f.value:"未指定";return`参数[${f.index}] ${T} ${k}`}).filter(Boolean);(g==null?void 0:g.length)>0&&(C=g.join(" 且 "));break;case"attachments":const n=(h=i.list)==null?void 0:h.map(f=>{const T=f.condition==="="?"等于":f.condition==="!="?"不等于":f.condition||"",k=f.value!==void 0&&f.value!==""?f.value:"未指定";return`附件[${f.myKey||"未指定"}] ${T} ${k}`}).filter(Boolean);(n==null?void 0:n.length)>0&&(C=n.join(" 且 "));break;case"other":const p=(l=i.list)==null?void 0:l.map(f=>{const T=f.condition==="="?"等于":f.condition==="!="?"不等于":f.condition||"",k=f.value!==void 0&&f.value!==""?f.value:"未指定";return`自定义匹配[${f.myKey||"未指定"}] ${T} ${k}`}).filter(Boolean);(p==null?void 0:p.length)>0&&(C=p.join(" 且 "));break}C&&((w==="host"||w==="application"||w==="method")&&!i.value?y.push(`${w==="host"?"请求来源主机":w==="application"?"请求来源应用":"请求方法"} 未填写`):y.push(C))});const j=y.length>0?y.join(" 且 "):"任意请求";let o=[];(B=t.selectedRouteDistributeMatchTypes)==null||B.forEach(w=>{var A,u;const i=(A=t.routeDistribute)==null?void 0:A.find(h=>h.type===w);if(!i)return;let C="";const x=i.condition==="="?"等于":i.condition==="!="?"不等于":i.condition||"",z=i.value||"未指定";switch(w){case"host":C=`目标主机 ${x} ${z}`;break;case"other":const h=(u=i.list)==null?void 0:u.map(l=>{const g=l.condition==="="?"等于":l.condition==="!="?"不等于":l.condition||"",n=l.value!==void 0&&l.value!==""?l.value:"未指定";return`目标标签[${l.myKey||"未指定"}] ${g} ${n}`}).filter(Boolean);(h==null?void 0:h.length)>0&&(C=h.join(" 且 "));break}C&&(w==="host"&&!i.value?o.push("目标主机 未填写"):o.push(C))});const N=o.length>0?`满足 【${o.join(" 且 ")}】`:"默认路由规则";return`${U}，将满足 【${j}】 条件的请求，转发到 ${N} 的实例。`}function _e(){let s=[],t="",d="";return r.value.forEach((b,q)=>{b.selectedMatchConditionTypes.forEach((y,j)=>{b.requestMatch.forEach((o,N)=>{if(y==(o==null?void 0:o.type))switch(o==null?void 0:o.type){case"arguments":o.list.forEach(($,B)=>{t.length>0&&(t+=" & "),t+=`${y}[${$.index}]${$.condition}${$.value}`});break;case"attachments":o.list.forEach(($,B)=>{t.length>0&&(t+=" & "),t+=`${y}[${$.myKey}]${$.condition}${$.value}`});break;case"other":o.list.forEach(($,B)=>{t.length>0&&(t+=" & "),t+=`${y}[${$.myKey}]${$.condition}${$.value}`});break;default:t.length>0&&(t+=" & "),t+=`${o.type}${o.condition}${o.value}`}})}),b.selectedRouteDistributeMatchTypes.forEach((y,j)=>{b.routeDistribute.forEach((o,N)=>{if(y==(o==null?void 0:o.type))switch(o==null?void 0:o.type){case"other":o==null||o.list.forEach(($,B)=>{d.length>0&&(d+=" & "),d+=`${y}[${$.myKey}]${$.condition}${$.value}`});break;default:d.length>0&&(d+=" & "),d+=`${o.type}${o.condition}${o.value}`}})});let U="";t.length>0&&d.length>0?U=`${t} => ${d}`:t.length>0&&d.length==0&&(U=`${t}`),s.push(U)}),s}const ke=async()=>{const{version:s,ruleGranularity:t,objectOfAction:d,enable:b,faultTolerantProtection:q,runtime:U,group:y}=M,j={configVersion:"v3.0",scope:t,key:d,enabled:b,force:q,runtime:U,conditions:_e()};let o="";t=="application"?o=`${d}.condition-router`:o=`${d}:${s}:${y}.condition-router`,(await Re(o,j)).code===200&&Z.push("/traffic/routingRule")};return(s,t)=>{const d=D("a-button"),b=D("a-flex"),q=D("a-select"),U=D("a-form-item"),y=D("a-input"),j=D("a-switch"),o=D("a-col"),N=D("a-input-number"),$=D("a-row"),B=D("a-form"),w=D("a-card"),i=D("a-space"),C=D("a-tag"),x=D("a-table"),z=D("a-descriptions-item"),A=D("a-descriptions");return c(),F("div",Ke,[e(b,{style:{width:"100%"}},{default:a(()=>[e(o,{span:P.value?24-X.value:24,class:"left"},{default:a(()=>[e(w,null,{default:a(()=>[e(i,{style:{width:"100%"},direction:"vertical",size:"middle"},{default:a(()=>[e($,null,{default:a(()=>[e(b,{justify:"end",style:{width:"100%"}},{default:a(()=>[e(d,{type:"text",style:{color:"#0a90d5"},onClick:t[0]||(t[0]=u=>P.value=!P.value)},{default:a(()=>[_(" 字段说明 "),P.value?(c(),v(K(we),{key:1})):(c(),v(K(Ue),{key:0}))]),_:1})]),_:1}),e(w,{title:"基础信息",style:{width:"100%"},class:"_detail"},{default:a(()=>[e(B,{layout:"horizontal"},{default:a(()=>[e($,{style:{width:"100%"}},{default:a(()=>[e(o,{span:12},{default:a(()=>[e(U,{label:"规则粒度",required:""},{default:a(()=>[e(q,{value:M.ruleGranularity,"onUpdate:value":t[1]||(t[1]=u=>M.ruleGranularity=u),style:{width:"120px"},options:ee.value},null,8,["value","options"])]),_:1}),M.ruleGranularity==="service"?(c(),v(U,{key:0,label:"版本",required:""},{default:a(()=>[e(y,{value:M.version,"onUpdate:value":t[2]||(t[2]=u=>M.version=u),style:{width:"300px"}},null,8,["value"])]),_:1})):R("",!0),e(U,{label:"容错保护"},{default:a(()=>[e(j,{checked:M.faultTolerantProtection,"onUpdate:checked":t[3]||(t[3]=u=>M.faultTolerantProtection=u),"checked-children":"开","un-checked-children":"关"},null,8,["checked"])]),_:1}),e(U,{label:"运行时生效"},{default:a(()=>[e(j,{checked:M.runtime,"onUpdate:checked":t[4]||(t[4]=u=>M.runtime=u),"checked-children":"开","un-checked-children":"关"},null,8,["checked"])]),_:1})]),_:1}),e(o,{span:12},{default:a(()=>[e(U,{label:"作用对象",required:""},{default:a(()=>[e(y,{value:M.objectOfAction,"onUpdate:value":t[5]||(t[5]=u=>M.objectOfAction=u),style:{width:"300px"}},null,8,["value"])]),_:1}),M.ruleGranularity==="service"?(c(),v(U,{key:0,label:"分组",required:""},{default:a(()=>[e(y,{value:M.group,"onUpdate:value":t[6]||(t[6]=u=>M.group=u),style:{width:"300px"}},null,8,["value"])]),_:1})):R("",!0),e(U,{label:"立即启用"},{default:a(()=>[e(j,{checked:M.enable,"onUpdate:checked":t[7]||(t[7]=u=>M.enable=u),"checked-children":"开","un-checked-children":"关"},null,8,["checked"])]),_:1}),e(U,{label:"优先级"},{default:a(()=>[e(N,{value:M.priority,"onUpdate:value":t[8]||(t[8]=u=>M.priority=u),min:"1"},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),e(w,{title:"路由列表",style:{width:"100%"},class:"_detail"},{default:a(()=>[(c(!0),F(H,null,W(r.value,(u,h)=>(c(),v(w,null,{title:a(()=>[e(b,{justify:"space-between"},{default:a(()=>[e(i,{align:"center"},{default:a(()=>[E("div",null,"路由【"+O(h+1)+"】",1),E("div",Se,O(fe(h)),1)]),_:2},1024),e(K(S),{onClick:l=>ae(h),class:"action-icon",icon:"tdesign:delete"},null,8,["onClick"])]),_:2},1024)]),default:a(()=>[e(B,{layout:"horizontal"},{default:a(()=>[e(i,{style:{width:"100%"},direction:"vertical",size:"large"},{default:a(()=>[e(U,{label:"请求匹配"},{default:a(()=>[u.requestMatch.length>0?(c(),v(w,{key:0},{default:a(()=>[e(i,{style:{width:"100%"},direction:"vertical",size:"small"},{default:a(()=>[e(b,{align:"center",justify:"space-between"},{default:a(()=>[e(U,{label:"匹配条件类型"},{default:a(()=>[e(q,{value:u.selectedMatchConditionTypes,"onUpdate:value":l=>u.selectedMatchConditionTypes=l,options:m.value,mode:"multiple",style:{"min-width":"200px"}},null,8,["value","onUpdate:value","options"])]),_:2},1024),e(K(S),{onClick:l=>te(h),class:"action-icon",icon:"tdesign:delete"},null,8,["onClick"])]),_:2},1024),(c(!0),F(H,null,W(u.requestMatch,(l,g)=>(c(),F(H,null,[u.selectedMatchConditionTypes.includes("host")&&l.type==="host"?(c(),v(i,{key:0,size:"large",align:"center"},{default:a(()=>[e(C,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:a(()=>[_(O(l==null?void 0:l.type),1)]),_:2},1024),e(q,{value:l.condition,"onUpdate:value":n=>l.condition=n,style:{"min-width":"120px"},options:V.value},null,8,["value","onUpdate:value","options"]),e(y,{value:l.value,"onUpdate:value":n=>l.value=n,placeholder:"请求来源ip"},null,8,["value","onUpdate:value"]),e(K(S),{onClick:n=>Q(l==null?void 0:l.type,h),class:"action-icon",icon:"tdesign:delete"},null,8,["onClick"])]),_:2},1024)):R("",!0),u.selectedMatchConditionTypes.includes("application")&&l.type==="application"?(c(),v(i,{key:1,size:"large",align:"center"},{default:a(()=>[e(C,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:a(()=>[_(O(l==null?void 0:l.type),1)]),_:2},1024),e(q,{value:l.condition,"onUpdate:value":n=>l.condition=n,style:{"min-width":"120px"},options:V.value},null,8,["value","onUpdate:value","options"]),e(y,{value:l.value,"onUpdate:value":n=>l.value=n,placeholder:"请求来源应用名"},null,8,["value","onUpdate:value"]),e(K(S),{onClick:n=>Q(l==null?void 0:l.type,h),class:"action-icon",icon:"tdesign:delete"},null,8,["onClick"])]),_:2},1024)):R("",!0),u.selectedMatchConditionTypes.includes("method")&&l.type==="method"?(c(),v(i,{key:2,size:"large",align:"center"},{default:a(()=>[e(C,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:a(()=>[_(O(l==null?void 0:l.type),1)]),_:2},1024),e(q,{value:l.condition,"onUpdate:value":n=>l.condition=n,style:{"min-width":"120px"},options:V.value},null,8,["value","onUpdate:value","options"]),e(y,{value:l.value,"onUpdate:value":n=>l.value=n,placeholder:"方法值"},null,8,["value","onUpdate:value"]),e(K(S),{onClick:n=>Q(l==null?void 0:l.type,h),class:"action-icon",icon:"tdesign:delete"},null,8,["onClick"])]),_:2},1024)):R("",!0),u.selectedMatchConditionTypes.includes("arguments")&&l.type==="arguments"?(c(),v(i,{key:3,style:{width:"100%"},size:"large",align:"start"},{default:a(()=>[e(C,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:a(()=>[_(O(l==null?void 0:l.type),1)]),_:2},1024),e(i,{direction:"vertical"},{default:a(()=>[e(d,{type:"primary",onClick:n=>oe(h,g)},{default:a(()=>[_(" 添加argument ")]),_:2},1032,["onClick"]),e(x,{pagination:!1,columns:ue,"data-source":u.requestMatch[g].list},{bodyCell:a(({column:n,record:p,text:f,index:T})=>[n.key==="index"?(c(),v(y,{key:0,value:p.index,"onUpdate:value":k=>p.index=k,placeholder:"index"},null,8,["value","onUpdate:value"])):n.key==="condition"?(c(),v(q,{key:1,value:p.condition,"onUpdate:value":k=>p.condition=k,options:V.value},null,8,["value","onUpdate:value","options"])):n.key==="value"?(c(),v(y,{key:2,value:p.value,"onUpdate:value":k=>p.value=k,placeholder:"value"},null,8,["value","onUpdate:value"])):n.key==="operation"?(c(),v(i,{key:3,align:"center"},{default:a(()=>[e(K(S),{onClick:k=>ie(h,g,T),icon:"tdesign:remove",class:"action-icon"},null,8,["onClick"])]),_:2},1024)):R("",!0)]),_:2},1032,["data-source"])]),_:2},1024)]),_:2},1024)):R("",!0),u.selectedMatchConditionTypes.includes("attachments")&&l.type==="attachments"?(c(),v(i,{key:4,style:{width:"100%"},size:"large",align:"start"},{default:a(()=>[e(C,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:a(()=>[_(O(l==null?void 0:l.type),1)]),_:2},1024),e(i,{direction:"vertical"},{default:a(()=>[e(d,{type:"primary",onClick:n=>de(h,g)},{default:a(()=>[_(" 添加attachment ")]),_:2},1032,["onClick"]),e(x,{pagination:!1,columns:ce,"data-source":u.requestMatch[g].list},{bodyCell:a(({column:n,record:p,text:f,index:T})=>[n.key==="myKey"?(c(),v(y,{key:0,value:p.myKey,"onUpdate:value":k=>p.myKey=k,placeholder:"key"},null,8,["value","onUpdate:value"])):n.key==="condition"?(c(),v(q,{key:1,value:p.condition,"onUpdate:value":k=>p.condition=k,options:V.value},null,8,["value","onUpdate:value","options"])):n.key==="value"?(c(),v(y,{key:2,value:p.value,"onUpdate:value":k=>p.value=k,placeholder:"value"},null,8,["value","onUpdate:value"])):n.key==="operation"?(c(),v(i,{key:3,align:"center"},{default:a(()=>[e(K(S),{onClick:k=>re(h,g,T),icon:"tdesign:remove",class:"action-icon"},null,8,["onClick"])]),_:2},1024)):R("",!0)]),_:2},1032,["data-source"])]),_:2},1024)]),_:2},1024)):R("",!0),u.selectedMatchConditionTypes.includes("other")&&l.type==="other"?(c(),v(i,{key:5,style:{width:"100%"},size:"large",align:"start"},{default:a(()=>[e(C,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:a(()=>[_(O((l==null?void 0:l.type)=="other"?"其他":l==null?void 0:l.type),1)]),_:2},1024),e(i,{direction:"vertical"},{default:a(()=>[e(d,{type:"primary",onClick:n=>pe(h,g)},{default:a(()=>[_(" 添加other ")]),_:2},1032,["onClick"]),e(x,{pagination:!1,columns:Y,"data-source":u.requestMatch[g].list},{bodyCell:a(({column:n,record:p,text:f})=>[n.key==="myKey"?(c(),v(y,{key:0,value:p.myKey,"onUpdate:value":T=>p.myKey=T,placeholder:"key"},null,8,["value","onUpdate:value"])):n.key==="condition"?(c(),v(q,{key:1,value:p.condition,"onUpdate:value":T=>p.condition=T,options:V.value},null,8,["value","onUpdate:value","options"])):n.key==="value"?(c(),v(y,{key:2,value:p.value,"onUpdate:value":T=>p.value=T,placeholder:"value"},null,8,["value","onUpdate:value"])):n.key==="operation"?(c(),v(i,{key:3,align:"center"},{default:a(()=>[e(K(S),{onClick:T=>ve(h,g,p.index),icon:"tdesign:remove",class:"action-icon"},null,8,["onClick"])]),_:2},1024)):R("",!0)]),_:2},1032,["data-source"])]),_:2},1024)]),_:2},1024)):R("",!0)],64))),256))]),_:2},1024)]),_:2},1024)):(c(),v(d,{key:1,onClick:l=>ne(h),type:"dashed",size:"large"},{icon:a(()=>[e(K(S),{icon:"tdesign:add"})]),default:a(()=>[_(" 增加匹配条件 ")]),_:2},1032,["onClick"]))]),_:2},1024),e(U,{label:"路由分发",required:""},{default:a(()=>[e(w,null,{default:a(()=>[e(i,{style:{width:"100%"},direction:"vertical",size:"small"},{default:a(()=>[e(b,null,{default:a(()=>[e(U,{label:"匹配条件类型"},{default:a(()=>[e(q,{value:u.selectedRouteDistributeMatchTypes,"onUpdate:value":l=>u.selectedRouteDistributeMatchTypes=l,options:I.value,mode:"multiple",style:{"min-width":"200px"}},null,8,["value","onUpdate:value","options"])]),_:2},1024)]),_:2},1024),(c(!0),F(H,null,W(u.routeDistribute,(l,g)=>(c(),F(H,{key:g},[u.selectedRouteDistributeMatchTypes.includes("host")&&l.type==="host"?(c(),v(i,{key:0,size:"large",align:"center"},{default:a(()=>[e(C,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:a(()=>[_(O(l==null?void 0:l.type),1)]),_:2},1024),e(q,{value:l.condition,"onUpdate:value":n=>l.condition=n,style:{"min-width":"120px"},options:V.value},null,8,["value","onUpdate:value","options"]),e(y,{value:l.value,"onUpdate:value":n=>l.value=n,placeholder:"请求来源ip"},null,8,["value","onUpdate:value"]),e(K(S),{onClick:n=>se(l==null?void 0:l.type,h),class:"action-icon",icon:"tdesign:delete"},null,8,["onClick"])]),_:2},1024)):R("",!0),u.selectedRouteDistributeMatchTypes.includes("other")&&l.type==="other"?(c(),v(i,{key:1,style:{width:"100%"},size:"large",align:"start"},{default:a(()=>[e(C,{class:"match-condition-type-label",bordered:!1,color:"processing"},{default:a(()=>[_(O((l==null?void 0:l.type)=="other"?"其他":l==null?void 0:l.type),1)]),_:2},1024),e(i,{direction:"vertical"},{default:a(()=>[e(d,{type:"primary",onClick:n=>ye(h,g)},{default:a(()=>[_(" 添加其他 ")]),_:2},1032,["onClick"]),e(x,{pagination:!1,columns:Y,"data-source":u.routeDistribute[g].list},{bodyCell:a(({column:n,record:p,text:f,index:T})=>[n.key==="myKey"?(c(),v(y,{key:0,value:p.myKey,"onUpdate:value":k=>p.myKey=k,placeholder:"key"},null,8,["value","onUpdate:value"])):n.key==="condition"?(c(),v(q,{key:1,value:p.condition,"onUpdate:value":k=>p.condition=k,options:V.value},null,8,["value","onUpdate:value","options"])):n.key==="value"?(c(),v(y,{key:2,value:p.value,"onUpdate:value":k=>p.value=k,placeholder:"value"},null,8,["value","onUpdate:value"])):n.key==="operation"?(c(),v(i,{key:3,align:"center"},{default:a(()=>[e(K(S),{onClick:k=>he(h,g,T),icon:"tdesign:remove",class:"action-icon"},null,8,["onClick"])]),_:2},1024)):R("",!0)]),_:2},1032,["data-source"])]),_:2},1024)]),_:2},1024)):R("",!0)],64))),128))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024))),256))]),_:1}),e(d,{onClick:le,type:"primary"},{default:a(()=>[_(" 增加路由")]),_:1})]),_:1})]),_:1})]),_:1},8,["span"]),e(o,{span:P.value?X.value:0,class:"right"},{default:a(()=>[P.value?(c(),v(w,{key:0,class:"sliderBox"},{default:a(()=>[E("div",null,[e(A,{title:"字段说明",column:1},{default:a(()=>[e(z,{label:"key"},{default:a(()=>[_(" 作用对象"),xe,_(" 可能的值：Dubbo应用名或者服务名 ")]),_:1}),e(z,{label:"scope"},{default:a(()=>[_(" 规则粒度"),ze,_(" 可能的值：application, service ")]),_:1}),e(z,{label:"force"},{default:a(()=>[_(" 容错保护"),Oe,_(" 可能的值：true, false"),je,_(" 描述：如果为true，则路由筛选后若没有可用的地址则会直接报异常；如果为false，则会从可用地址中选择完成RPC调用 ")]),_:1}),e(z,{label:"runtime"},{default:a(()=>[_(" 运行时生效"),Be,_(" 可能的值：true, false"),Ee,_(" 描述：如果为true，则该rule下的所有路由将会实时生效；若为false，则只有在启动时才会生效 ")]),_:1})]),_:1})])]),_:1})):R("",!0)]),_:1},8,["span"])]),_:1}),e(w,{class:"footer"},{default:a(()=>[e(b,null,{default:a(()=>[e(d,{type:"primary",onClick:ke},{default:a(()=>[_("确认")]),_:1}),e(d,{style:{"margin-left":"30px"},onClick:t[9]||(t[9]=u=>console.log(r.value))},{default:a(()=>[_(" 取消")]),_:1})]),_:1})]),_:1})])}}}),Fe=qe(Ve,[["__scopeId","data-v-1dcf22b2"]]);export{Fe as default};
