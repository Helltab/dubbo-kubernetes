import{d as b,k as T,l as S,m as x,r as E,Q as V,f as l,c as n,t as o,h as r,P as g,M as $,e as N,o as c,R as p,z as a,J as B,I as D,B as _,K as d,F as f,_ as A}from"./index-2tg1dFrv.js";import{s as G,d as O}from"./traffic-uK9CJKqJ.js";import{S as P,a as F,s as y}from"./SearchUtil-5N2iw-TY.js";import{f as M}from"./DateUtil-EomJUVHv.js";import"./request-2UPhfKnX.js";const Y={class:"__container_resources_application_index"},J=["onClick"],K=b({__name:"index",setup(j){T(e=>({"62c859c0":r(g)}));const C=S(x.PROVIDE_INJECT_KEY);let I=[{title:"ruleName",key:"ruleName",dataIndex:"ruleName",sorter:(e,t)=>y(e.appName,t.appName),width:140},{title:"ruleGranularity",key:"ruleGranularity",dataIndex:"ruleGranularity",render:(e,t)=>t.isService?"服务":"应用",width:100,sorter:(e,t)=>y(e.instanceNum,t.instanceNum)},{title:"createTime",key:"createTime",dataIndex:"createTime",width:120,sorter:(e,t)=>y(e.instanceNum,t.instanceNum)},{title:"enabled",key:"enabled",dataIndex:"enabled",width:120,sorter:(e,t)=>y(e.instanceNum,t.instanceNum)},{title:"operation",key:"operation",dataIndex:"operation",width:200}];const u=E(new P([{label:"serviceGovernance",param:"serviceGovernance",placeholder:"typeRoutingRules",style:{width:"200px"}}],G,I)),v=async e=>{(await O(e)).code===200&&await u.onSearch()};V(()=>{u.onSearch(),C.conditionRule=null});const R=e=>{v(e)};return $(x.SEARCH_DOMAIN,u),(e,t)=>{const m=N("a-button"),w=N("a-popconfirm");return c(),l("div",Y,[n(F,{"search-domain":u},{customOperation:o(()=>[n(m,{type:"primary",onClick:t[0]||(t[0]=k=>r(p).push("/traffic/addRoutingRule/addByFormView"))},{default:o(()=>[a("新增条件路由规则 ")]),_:1})]),bodyCell:o(({text:k,column:i,record:s})=>[i.dataIndex==="ruleName"?(c(),l("span",{key:0,class:"rule-link",onClick:h=>r(p).push(`formview/${s[i.key]}`)},[B("b",null,[n(r(D),{style:{"margin-bottom":"-2px"},icon:"material-symbols:attach-file-rounded"}),a(" "+_(k),1)])],8,J)):d("",!0),i.dataIndex==="ruleGranularity"?(c(),l(f,{key:1},[a(_(s.scope==="service"?"服务":"应用"),1)],64)):d("",!0),i.dataIndex==="enabled"?(c(),l(f,{key:2},[a(_(k?"启用":"禁用"),1)],64)):d("",!0),i.dataIndex==="createTime"?(c(),l(f,{key:3},[a(_(r(M)(s.createTime)),1)],64)):d("",!0),i.dataIndex==="operation"?(c(),l(f,{key:4},[n(m,{type:"link",onClick:h=>r(p).push(`formview/${s.ruleName}`)},{default:o(()=>[a(" 查看 ")]),_:2},1032,["onClick"]),n(m,{type:"link",onClick:h=>r(p).push(`/traffic/updateRoutingRule/updateByFormView/${s.ruleName}`)},{default:o(()=>[a(" 修改 ")]),_:2},1032,["onClick"]),n(w,{title:"确认删除该条件路由规则？","ok-text":"Yes","cancel-text":"No",onConfirm:h=>R(s.ruleName)},{default:o(()=>[n(m,{type:"link"},{default:o(()=>[a(" 删除")]),_:1})]),_:2},1032,["onConfirm"])],64)):d("",!0)]),_:1},8,["search-domain"])])}}}),U=A(K,[["__scopeId","data-v-5b76f7a4"]]);export{U as default};
